<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Linux下find,xargs,cp的结合使用</title>
    <meta name="description" content="最近遇到一个需要拷贝目录下core文件并打包上传的工作，简单记录一下用到的命令:   ##使用find查找core并保存   find ~/asw_server/ -name "core.*" -type f -ctime -1 |xargs -i sudo cp {} ~/version_bak/coredir...">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://10.1.1.157:8002/2017/01/15/find-xargs-with-cp/">
    <link rel="alternate" type="application/rss+xml" title="Boban's blog" href="http://10.1.1.157:8002/feed.xml ">


    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?13d3b633b10071f50f3c37be28910c06";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Boban's blog</a>
        <small>SA Engineer</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>Linux下find,xargs,cp的结合使用</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2017-01-15
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Linux" title="Category: Linux" rel="category">Linux</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#Linux" title="Tag: Linux" rel="tag">Linux</a-->
        <a href="/tag/#Linux" title="Tag: Linux" rel="tag">Linux</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <p>最近遇到一个需要拷贝目录下core文件并打包上传的工作，简单记录一下用到的命令:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>
   <span class="c">##使用find查找core并保存</span>
   find ~/asw_server/ -name <span class="s2">"core.*"</span> -type f -ctime -1 |xargs -i sudo cp <span class="o">{}</span> ~/version_bak/coredir/
</code></pre>
</div>

<p>简单解释一下：</p>

<p>find -ctime  表示changetime，改变时间状态的文件  -1 表示1天内</p>

<h5 id="下面是同类的参数列表">下面是同类的参数列表</h5>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>	-amin n   查找系统中最后N分钟访问的文件
	-atime n  查找系统中最后n<span class="k">*</span>24小时访问的文件
	-cmin n   查找系统中最后N分钟被改变文件状态的文件
	-ctime n  查找系统中最后n<span class="k">*</span>24小时被改变文件状态的文件
	-mmin n   查找系统中最后N分钟被改变文件数据的文件
	-mtime n  查找系统中最后n<span class="k">*</span>24小时被改变文件数据的文件
</code></pre>
</div>

<p>xargs 每次处理一部分从管道传来的文件</p>

<h5 id="下面是man-xargs得到的信息">下面是man xargs得到的信息：</h5>
<div class="language-shell highlighter-rouge"><pre class="highlight"><code>
XARGS<span class="o">(</span>1<span class="o">)</span>                                                                                                                                              XARGS<span class="o">(</span>1<span class="o">)</span>

NAME
       xargs - build and execute <span class="nb">command </span>lines from standard input

SYNOPSIS
       xargs  <span class="o">[</span>-0prtx]  <span class="o">[</span>-E  eof-str]  <span class="o">[</span>-e[eof-str]]  <span class="o">[</span>--eof[<span class="o">=</span>eof-str]]  <span class="o">[</span>--null]  <span class="o">[</span>-d  delimiter]  <span class="o">[</span>--delimiter delimiter] <span class="o">[</span>-I replace-str] <span class="o">[</span>-i[replace-str]]
       <span class="o">[</span>--replace[<span class="o">=</span>replace-str]] <span class="o">[</span>-l[max-lines]] <span class="o">[</span>-L max-lines] <span class="o">[</span>--max-lines[<span class="o">=</span>max-lines]] <span class="o">[</span>-n max-args] <span class="o">[</span>--max-args<span class="o">=</span>max-args] <span class="o">[</span>-s max-chars] <span class="o">[</span>--max-chars<span class="o">=</span>max-
       chars]  <span class="o">[</span>-P  max-procs]  <span class="o">[</span>--max-procs<span class="o">=</span>max-procs] <span class="o">[</span>--interactive] <span class="o">[</span>--verbose] <span class="o">[</span>--exit] <span class="o">[</span>--no-run-if-empty] <span class="o">[</span>--arg-file<span class="o">=</span>file] <span class="o">[</span>--show-limits] <span class="o">[</span>--version]
       <span class="o">[</span>--help] <span class="o">[</span><span class="nb">command</span> <span class="o">[</span>initial-arguments]]

DESCRIPTION
       This manual page documents the GNU version of xargs.  xargs reads items from the standard input, delimited by blanks <span class="o">(</span>which can be protected with  dou‐
       ble or single quotes or a backslash<span class="o">)</span> or newlines, and executes the <span class="nb">command</span> <span class="o">(</span>default is /bin/echo<span class="o">)</span> one or more <span class="nb">times </span>with any initial-arguments followed
       by items <span class="nb">read </span>from standard input.  Blank lines on the standard input are ignored.

       Because Unix filenames can contain blanks and newlines, this default behaviour is often problematic; filenames containing blanks  and/or  newlines  are
       incorrectly processed by xargs.  In these situations it is better to use the -0 option, which prevents such problems.   When using this option you will
       need to ensure that the program which produces the input <span class="k">for </span>xargs also uses a null character as a separator.  If that program is GNU find <span class="k">for </span>example,
       the -print0 option does this <span class="k">for </span>you.

       If any invocation of the <span class="nb">command </span>exits with a status of 255, xargs will stop immediately without reading any further input.  An error message is issued
       on stderr when this happens.

OPTIONS
       --arg-file<span class="o">=</span>file
       -a file
              Read items from file instead of standard input.  If you use this option, stdin remains unchanged when commands are  run.   Otherwise,  stdin  is
              redirected from /dev/null.

       --null
       -0     Input  items are terminated by a null character instead of by whitespace, and the quotes and backslash are not special <span class="o">(</span>every character is taken
              literally<span class="o">)</span>.  Disables the end of file string, which is treated like any other argument.  Useful when input  items  might  contain  white  space,
              quote marks, or backslashes.  The GNU find -print0 option produces input suitable <span class="k">for </span>this mode.

       --delimiter<span class="o">=</span>delim
       -d delim
              Input  items  are terminated by the specified character.  Quotes and backslash are not special; every character <span class="k">in </span>the input is taken literally.
              Disables the end-of-file string, which is treated like any other argument.  This can be used when the input consists of simply newline-separated
              items, although it is almost always better to design your program to use --null where this is possible.  The specified delimiter may be a single
              character, a C-style character escape such as <span class="se">\n</span>, or an octal or hexadecimal escape code.  Octal and hexadecimal escape codes are understood  as
              <span class="k">for </span>the <span class="nb">printf </span>command.   Multibyte characters are not supported.

       -E eof-str
              Set  the  end  of file string to eof-str.  If the end of file string occurs as a line of input, the rest of the input is ignored.  If neither -E
              nor -e is used, no end of file string is used.

       --eof[<span class="o">=</span>eof-str]
       -e[eof-str]
              This option is a synonym <span class="k">for </span>the -E option.  Use -E instead, because it is POSIX compliant <span class="k">while </span>this option is not.   If  eof-str  is  omitted,
              there is no end of file string.  If neither -E nor -e is used, no end of file string is used.

       --help Print a summary of the options to xargs and exit.

       -I replace-str
              Replace  occurrences  of replace-str <span class="k">in </span>the initial-arguments with names <span class="nb">read </span>from standard input.  Also, unquoted blanks <span class="k">do </span>not terminate input
              items; instead the separator is the newline character.  Implies -x and -L 1.

       --replace[<span class="o">=</span>replace-str]
       -i[replace-str]
              This option is a synonym <span class="k">for</span> -Ireplace-str <span class="k">if </span>replace-str is specified, and <span class="k">for</span> -I<span class="o">{}</span> otherwise.  This option is deprecated; use -I instead.

       -L max-lines
              Use at most max-lines nonblank input lines per <span class="nb">command </span>line.  Trailing blanks cause an input line to be logically continued on  the  next  input
              line.  Implies -x.

       --max-lines[<span class="o">=</span>max-lines]
       -l[max-lines]
              Synonym <span class="k">for </span>the -L option.  Unlike -L, the max-lines argument is optional.  If max-lines is not specified, it defaults to one.  The -l option is
              deprecated since the POSIX standard specifies -L instead.

       --max-args<span class="o">=</span>max-args
       -n max-args
              Use at most max-args arguments per <span class="nb">command </span>line.  Fewer than max-args arguments will be used <span class="k">if </span>the size <span class="o">(</span>see the -s option<span class="o">)</span> is exceeded, unless
              the -x option is given, <span class="k">in </span>which <span class="k">case</span> xargs will exit.

       --interactive
       -p     Prompt the user about whether to run each <span class="nb">command </span>line and <span class="nb">read </span>a line from the terminal.  Only run the <span class="nb">command </span>line <span class="k">if </span>the response starts with
              <span class="sb">`</span>y<span class="s1">' or `Y'</span>.  Implies -t.

       --no-run-if-empty
       -r     If the standard input does not contain any nonblanks, <span class="k">do </span>not run the command.  Normally, the <span class="nb">command </span>is run once even  <span class="k">if  </span>there  is  no  input.
              This option is a GNU extension.

       --max-chars<span class="o">=</span>max-chars
       -s max-chars
              Use  at most max-chars characters per <span class="nb">command </span>line, including the <span class="nb">command </span>and initial-arguments and the terminating nulls at the ends of the ar‐
              gument strings.  The largest allowed value is system-dependent, and is calculated as the argument length limit <span class="k">for </span><span class="nb">exec</span>, less the size  of  your
              environment,  less 2048 bytes of headroom.  If this value is more than 128KiB, 128Kib is used as the default value; otherwise, the default value
              is the maximum.  1KiB is 1024 bytes.

       --verbose
       -t     Print the <span class="nb">command </span>line on the standard error output before executing it.

       --version
              Print the version number of xargs and exit.

       --show-limits
              Display the limits on the <span class="nb">command</span>-line length which are imposed by the operating system, xargs<span class="s1">' choice of buffer size and the -s  option.   Pipe
              the input from /dev/null (and perhaps specify --no-run-if-empty) if you don'</span>t want xargs to <span class="k">do </span>anything.

       --exit
       -x     Exit <span class="k">if </span>the size <span class="o">(</span>see the -s option<span class="o">)</span> is exceeded.

       --max-procs<span class="o">=</span>max-procs
       -P max-procs
              Run  up to max-procs processes at a <span class="nb">time</span>; the default is 1.  If max-procs is 0, xargs will run as many processes as possible at a time.  Use the
              -n option with -P; otherwise chances are that only one <span class="nb">exec </span>will be <span class="k">done</span>.

EXAMPLES
       find /tmp -name core -type f -print | xargs /bin/rm -f

       Find files named core <span class="k">in </span>or below the directory /tmp and delete them.  Note that this will work incorrectly <span class="k">if </span>there are any filenames containing  new‐
       lines or spaces.

       find /tmp -name core -type f -print0 | xargs -0 /bin/rm -f

       Find files named core <span class="k">in </span>or below the directory /tmp and delete them, processing filenames <span class="k">in </span>such a way that file or directory names containing spaces
       or newlines are correctly handled.

       find /tmp -depth -name core -type f -delete

       Find files named core <span class="k">in </span>or below the directory /tmp and delete them, but more efficiently than <span class="k">in </span>the previous example <span class="o">(</span>because we avoid the  need  to
       use fork<span class="o">(</span>2<span class="o">)</span> and <span class="nb">exec</span><span class="o">(</span>2<span class="o">)</span> to launch rm and we don<span class="s1">'t need the extra xargs process).

       cut -d: -f1 &lt; /etc/passwd | sort | xargs echo

       Generates a compact listing of all the users on the system.

       xargs sh -c '</span>emacs <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> &lt; /dev/tty<span class="s1">' emacs

       Launches  the  minimum number of copies of Emacs needed, one after the other, to edit the files listed on xargs'</span> standard input.  This example achieves
       the same effect as BSD<span class="s1">'s -o option, but in a more flexible and portable way.

EXIT STATUS
       xargs exits with the following status:
       0 if it succeeds
       123 if any invocation of the command exited with status 1-125
       124 if the command exited with status 255
       125 if the command is killed by a signal
       126 if the command cannot be run
       127 if the command is not found
       1 if some other error occurred.

       Exit codes greater than 128 are used by the shell to indicate that a program died due to a fatal signal.

STANDARDS CONFORMANCE
       As of GNU xargs version 4.2.9, the default behaviour of xargs is not to have a logical end-of-file marker.  POSIX (IEEE Std 1003.1, 2004  Edition)  al‐
       lows this.

       The  -l  and  -i options appear in the 1997 version of the POSIX standard, but do not appear in the 2004 version of the standard.  Therefore you should
       use -L and -I instead, respectively.

       The POSIX standard allows implementations to have a limit on the size of arguments to the exec functions.  This limit could be as low as 4096 bytes in‐
       cluding the size of the environment.  For scripts to be portable, they must not rely on a larger value.  However, I know of no implementation whose ac‐
       tual limit is that small.  The --show-limits option can be used to discover the actual limits in force on the current system.

SEE ALSO
       find(1), locate(1), locatedb(5), updatedb(1), fork(2), execvp(3), Finding Files (on-line in Info, or printed)

BUGS
       The -L option is incompatible with the -I option, but perhaps should not be.

       It is not possible for xargs to be used securely, since there will always be a time gap between the production of the list of input files and their use
       in  the  commands that xargs issues.  If other users have access to the system, they can manipulate the filesystem during this time window to force the
       action of the commands xargs runs to apply to files that you didn'</span>t intend.  For a more detailed discussion of this and related problems, please  refer
       to  the <span class="sb">``</span>Security Considerations<span class="s1">''</span> chapter <span class="k">in </span>the findutils Texinfo documentation.  The -execdir option of find can often be used as a more secure al‐
       ternative.

       When you use the -I option, each line <span class="nb">read </span>from the input is buffered internally.   This means that there is an upper limit on the length of input line
       that  xargs will accept when used with the -I option.  To work around this limitation, you can use the -s option to increase the amount of buffer space
       that xargs uses, and you can also use an extra invocation of xargs to ensure that very long lines <span class="k">do </span>not occur.  For example:

       somecommand | xargs -s 50000 <span class="nb">echo</span> | xargs -I <span class="s1">'{}'</span> -s 100000 rm <span class="s1">'{}'</span>

       Here, the first invocation of xargs has no input line length limit because it doesn<span class="s1">'t use the -i option.  The second invocation of xargs does have such
       a  limit, but we have ensured that the it never encounters a line which is longer than it can handle.   This is not an ideal solution.  Instead, the -i
       option should not impose a line length limit, which is why this discussion appears in the BUGS section.  The problem doesn'</span>t occur with the  output  of
       find<span class="o">(</span>1<span class="o">)</span> because it emits just one filename per line.

       The best way to report a bug is to use the form at http://savannah.gnu.org/bugs/?group<span class="o">=</span>findutils.  The reason <span class="k">for </span>this is that you will <span class="k">then </span>be able to
       track progress <span class="k">in </span>fixing the problem.   Other comments about xargs<span class="o">(</span>1<span class="o">)</span> and about the findutils package <span class="k">in </span>general can be sent to the bug-findutils mail‐
       ing list.  To join the list, send email to bug-findutils-request@gnu.org.

</code></pre>
</div>

        </article>
        <hr>

        
        
            
            
                
                    
                
            
        
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>上一篇</strong> <a href="/2017/01/11/first-blog/">Hello Github Pages</a></p>
        
    </div>
    <div class="nex">

        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        





    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
           /*  好记性不如烂BLOG!  */
        </p>
        <p class="contact">
                 联系我: 
            <a href="https://github.com/mkhappy" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:boban@taomee.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" class="scroll">
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/scroll.min.js " charset="utf-8"></script>
  </body>

</html>
